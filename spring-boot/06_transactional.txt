Tricky @Transactional Questions (With What Interviewers Are Testing)
âœ… 1. Self Invocation Problem

Q: Why does @Transactional not work when one method calls another method inside the same class?

Expected Insight

Spring uses proxy-based AOP

Internal method call â†’ bypasses proxy â†’ no transaction

Follow-up Trap

How to fix?

Move method to another bean

Use self-injection

Use AspectJ mode

âœ… 2. Private Method Trap

Q: Does @Transactional work on private methods?

Answer
âŒ No â€” proxy cannot intercept private methods

Testing

Understanding of proxy mechanism

âœ… 3. Checked vs Unchecked Exception Rollback

Q: Which exceptions trigger rollback by default?

Answer

âœ… RuntimeException â†’ rollback

âŒ Checked Exception â†’ no rollback

Follow-up
How to rollback for checked exception?

@Transactional(rollbackFor = Exception.class)

âœ… 4. Transaction Lost in Async Call

Q: If you call an @Async method from a @Transactional method, does transaction propagate?

Answer
âŒ No â€” different thread â†’ different transaction context

âœ… 5. ReadOnly Transaction Reality Check

Q: What does @Transactional(readOnly = true) actually do?

Expected Deep Answer

Hint to ORM (Hibernate skips dirty checking)

Database may optimize

Does NOT enforce read-only at DB level always

âœ… 6. Nested Transaction Confusion

Q: Difference between:

REQUIRED

REQUIRES_NEW

NESTED

Trap
Most devs confuse NESTED and REQUIRES_NEW.

Correct Understanding

Type	Behavior
REQUIRED	Join existing or create
REQUIRES_NEW	Suspend parent + new TX
NESTED	Savepoint inside parent TX
âœ… 7. Transaction + External API Call

Q: Should you call external payment API inside DB transaction?

Expected Answer
âŒ No
Reason:

Locks held longer

Timeout risk

Distributed transaction complexity

Better â†’ Saga / Outbox Pattern

âœ… 8. Transaction Not Working on Interface Default Method

Q: Why sometimes @Transactional works on interface but not always?

Answer
Depends on proxy type:

JDK proxy â†’ interface methods only

CGLIB â†’ class methods also

âœ… 9. Multiple Transaction Managers

Q: What happens if you have 2 datasources?

Expected
Must specify:

@Transactional("orderTxManager")

âœ… 10. LazyInitializationException Despite Transaction

Q: Why LazyInitializationException occurs even inside transaction sometimes?

Testing

Transaction ended before lazy fetch

Detached entity scenario

Wrong propagation

âœ… 11. Transaction Boundary in Controller

Q: Should you put @Transactional on Controller?

Expected
âŒ No â€” business logic layer only

âœ… 12. Transaction Timeout Production Scenario

Q: What happens if transaction timeout occurs?

Expected

Marked rollback only

DB resources released

Exception thrown at commit

âœ… 13. Transaction + Kafka Publish

Q: If DB transaction commits but Kafka publish fails, what happens?

Testing
Event consistency problem â†’ Outbox pattern needed

âœ… 14. Rollback Only Marker Trap

Q: Why do you see:

Transaction silently rolled back because it has been marked as rollback-only

Cause
Inner method threw exception â†’ caught â†’ but TX already marked rollback-only

âœ… 15. Transaction Propagation Interview Killer

Scenario
Method A â†’ REQUIRED
Method B â†’ REQUIRES_NEW
B fails â†’ Does A rollback?

Answer
âŒ No â€” B independent

ğŸ’€ Ultra Tricky (Architect Level)
âš ï¸ 16. Transaction + Connection Pool Exhaustion

Long transaction â†’ holds connection â†’ pool starvation â†’ cascading failure.

âš ï¸ 17. Transaction + Distributed Lock

DB TX + Redis lock â†’ deadlock risk if ordering inconsistent.

âš ï¸ 18. Transaction + Retry

Retry inside transaction = âŒ
Retry outside transaction = âœ…

Top 10 Production Failure Stories Caused by Wrong @Transactional Usage
ğŸ’¥ 1. Self Invocation â†’ Transactions Silently Not Applied
ğŸ§¨ Incident

Booking service had:

createBooking() -> validatePayment()


Both had @Transactional.

But validatePayment() was called internally â†’ transaction never applied.

ğŸ”¥ Result

Partial DB updates

Payment validated but booking row missing

Reconciliation nightmare

ğŸ§  Lesson

Spring AOP proxy â‰  internal calls.

ğŸ’¥ 2. Transaction + External API Call = Database Lock Explosion
ğŸ§¨ Incident

Inside transaction:

1. Insert Order
2. Call Payment Gateway (3â€“5 sec latency)
3. Update Order Status

ğŸ”¥ Result

DB row locks held for seconds

Connection pool exhausted

Entire system slowed

ğŸ§  Lesson

Never keep transaction open during network call.

ğŸ’¥ 3. Checked Exception â†’ No Rollback â†’ Silent Data Corruption
ğŸ§¨ Incident
@Transactional
public void createOrder() throws IOException


IOException happened â†’ transaction committed.

ğŸ”¥ Result

Half-written orders

Inventory deducted but order missing

ğŸ§  Lesson

Default rollback only for RuntimeException.

ğŸ’¥ 4. @Async + @Transactional â†’ Lost Transaction Context
ğŸ§¨ Incident

Order created â†’ async notification â†’ notification failed â†’ expected rollback.

ğŸ”¥ Result

Order committed

Notification lost

Customer never got confirmation

ğŸ§  Lesson

Transactions are thread-bound.

ğŸ’¥ 5. Transaction Too Large â†’ Connection Pool Starvation
ğŸ§¨ Incident

Transaction wrapped:

DB updates

Kafka publish

Cache update

Audit logging

Email sending

ğŸ”¥ Result

Threads waiting for DB connection

Latency spike â†’ cascading failure

ğŸ§  Lesson

Transaction scope must be minimal.

ğŸ’¥ 6. Wrong Propagation â†’ Parent Transaction Marked Rollback
ğŸ§¨ Incident
OrderService (REQUIRED)
 â”” PaymentService (REQUIRED)


Payment failed â†’ caught exception â†’ still rollback happened later.

ğŸ”¥ Result

Debugging nightmare

â€œRollback-onlyâ€ exception at commit time

ğŸ§  Lesson

Catching exception does NOT clear rollback flag.

ğŸ’¥ 7. readOnly = true Misunderstood â†’ Data Updated But Not Flushed
ğŸ§¨ Incident

Developer assumed readOnly prevents updates.

Hibernate skipped flush optimization â†’ data inconsistency observed.

ğŸ”¥ Result

Updates lost

Cache inconsistent with DB

ğŸ§  Lesson

readOnly = hint, not enforcement.

ğŸ’¥ 8. Missing Isolation Level â†’ Double Booking Bug
ğŸ§¨ Incident

Two users booked same seat simultaneously.

Default isolation = READ_COMMITTED â†’ race condition.

ğŸ”¥ Result

Oversold inventory

Refund handling cost

ğŸ§  Lesson

Sometimes need:

SERIALIZABLE
SELECT FOR UPDATE
Optimistic locking

ğŸ’¥ 9. Transaction Around Batch Processing â†’ Massive Rollback
ğŸ§¨ Incident

10,000 records processed in single transaction.

Record 9,999 failed â†’ everything rolled back.

ğŸ”¥ Result

Hours of processing wasted

DB redo logs huge

ğŸ§  Lesson

Chunk transactions.

ğŸ’¥ 10. DB Transaction + Kafka Publish Without Outbox â†’ Data Drift
ğŸ§¨ Incident
DB commit success
Kafka publish failed

ğŸ”¥ Result

Downstream services never got event

Data mismatch across microservices